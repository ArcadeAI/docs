---
title: "Mastra with Arcade"
description: "Build TypeScript agents with Mastra and Arcade tools"
---

# Mastra with Arcade

Build production-ready TypeScript agents with Mastra's framework and Arcade's 100+ tools.

## What you'll build

A morning briefing agent that:
- Checks Gmail for unread messages
- Lists today's calendar events
- Sends a summary to Slack
- Uses Mastra for reliable agent orchestration

**Time to complete:** 15 minutes

## Prerequisites

- Node.js 18 or higher
- [Arcade API key](/home/api-keys)
- Gmail, Google Calendar, and Slack accounts

## Step 1: Install dependencies

```bash
npm install @mastra/core @arcadeai/arcadejs
```

## Step 2: Initialize Arcade client

Create `briefing-agent.ts`:

```typescript
import { Agent } from "@mastra/core";
import Arcade from "@arcadeai/arcadejs";

// Initialize Arcade
const arcade = new Arcade({
  apiKey: "your_api_key_here",
});

// Your user identifier
const userId = "user@example.com";
```

## Step 3: Get Arcade tools

```typescript
// Get tools from Arcade
const tools = [
  await arcade.getTool("Gmail.ListMessages", { userId }),
  await arcade.getTool("GoogleCalendar.ListEvents", { userId }),
  await arcade.getTool("Slack.SendMessage", { userId }),
];
```

## Step 4: Create the agent

```typescript
// Create agent with tools
const agent = new Agent({
  name: "Morning Briefing Agent",
  instructions: `You are a helpful assistant that generates morning briefings.
  Check emails, calendar events, and send summaries to Slack.`,
  model: "gpt-4o",
  tools,
});
```

## Step 5: Run the agent

```typescript
// Run the agent
const response = await agent.run({
  prompt: `Generate my morning briefing:
  1. Check my Gmail for unread messages from today
  2. Check my calendar for events today
  3. Send a summary to #general on Slack with the format:
     'Morning briefing: X unread emails, Y meetings today'
  `,
});

console.log(response.text);
```

## Step 6: Handle authorization

On first run, the agent will pause for tool authorization:

```
Please authorize Gmail: https://arcade.dev/auth/abc123
Waiting for authorization...
```

1. Open the URL in your browser
2. Grant permissions
3. The agent will automatically continue

## Expected output

```
I've generated your morning briefing:
- You have 5 unread emails from today
- You have 3 meetings scheduled today
- Summary sent to #general on Slack
```

## Full example

```typescript
import { Agent } from "@mastra/core";
import Arcade from "@arcadeai/arcadejs";

async function main() {
  // Initialize
  const arcade = new Arcade({
    apiKey: "your_api_key_here",
  });
  const userId = "user@example.com";

  // Get tools
  const tools = [
    await arcade.getTool("Gmail.ListMessages", { userId }),
    await arcade.getTool("GoogleCalendar.ListEvents", { userId }),
    await arcade.getTool("Slack.SendMessage", { userId }),
  ];

  // Create agent
  const agent = new Agent({
    name: "Morning Briefing Agent",
    instructions: "Generate morning briefings from emails and calendar.",
    model: "gpt-4o",
    tools,
  });

  // Run agent
  const response = await agent.run({
    prompt: `Generate my morning briefing:
    1. Check Gmail for unread messages from today
    2. Check calendar for today's events
    3. Send summary to #general on Slack
    `,
  });

  console.log(response.text);
}

main();
```

## Advanced: Streaming responses

```typescript
// Stream agent responses
const stream = await agent.stream({
  prompt: "Generate my morning briefing",
});

for await (const chunk of stream) {
  process.stdout.write(chunk.text);
}
```

## Advanced: Multi-step workflows

```typescript
// Create a workflow with multiple agents
import { Workflow } from "@mastra/core";

const workflow = new Workflow({
  steps: [
    {
      name: "check-email",
      agent: emailAgent,
      prompt: "Check Gmail for unread messages",
    },
    {
      name: "check-calendar",
      agent: calendarAgent,
      prompt: "Check calendar for today's events",
    },
    {
      name: "send-summary",
      agent: slackAgent,
      prompt: "Send summary to Slack",
      inputs: ["check-email", "check-calendar"],
    },
  ],
});

const result = await workflow.run();
console.log(result);
```

## Next steps

- [Learn about user authorization](/home/mastra/user-auth-interrupts)
- [Explore all available tools](/mcp-servers)
- [Build custom tools](/home/build-tools/create-a-mcp-server)
- [Mastra documentation](https://mastra.ai/docs)

---

**Want to try a different framework?** Check out:
- [Vercel AI SDK](/home/vercelai/tutorial)
- [LangGraph (TypeScript)](/home/langchain/tutorial)
- [OpenAI Agents](/home/oai-agents/tutorial)
