import { Tabs, Callout, Steps } from "nextra/components";

# GitHub

The GitHub auth provider enables tools and agents to call [GitHub APIs](https://docs.github.com/en/rest/overview/resources-in-the-rest-api) on behalf of a user.

<Callout>
  Want to quickly get started with GitHub in your agent or AI app? The pre-built
  [Arcade GitHub MCP Server](/mcp-servers/development/github) is what you want!
</Callout>

## What's documented here

This page describes how to use and configure GitHub auth with Arcade.

This auth provider is used by:

- The [Arcade GitHub MCP Server](/mcp-servers/development/github), which provides pre-built tools for interacting with GitHub
- Your [app code](#using-github-auth-in-app-code) that needs to call the GitHub API
- Or, your [custom tools](#using-github-auth-in-custom-tools) that need to call the GitHub API

---

## Why Arcade Uses GitHub Apps (Not OAuth Apps)

### Arcade's Decision

Arcade's security team selected **GitHub Apps** over OAuth Apps for the GitHub toolkit based on three critical factors:

1. **üéØ GitHub's Recommendation**: OAuth Apps are soft-deprecated. GitHub actively recommends Apps for new integrations and invests in their development.

2. **üîê Fine-Grained Security**: GitHub Apps support granular permissions (e.g., "Read pull requests"), while OAuth Apps only offer coarse scopes (e.g., `repo` = full repository access).

3. **üè¢ Enterprise Control**: Admins can approve exact permissions and see all app installations. OAuth Apps bypass organizational oversight.

<Callout type="info">
  **Important**: When creating your GitHub integration with Arcade, you must use a **GitHub App** (not an OAuth App). 
  GitHub Apps provide the security and permission model required for production use.
</Callout>

### Quick Comparison

| Aspect | üèÜ GitHub Apps (Required) | OAuth Apps (Not Supported) |
|--------|---------------------------|----------------------------|
| **Permissions** | Fine-grained (e.g., "Read contents") | Broad scopes (e.g., `repo` = full access) |
| **Installation** | Per repository/org (admin approval) | Per user (no approval) |
| **Access** | Only installed repositories | All user repositories |
| **Tokens** | Scoped, short-lived | Broad, long-lived |
| **Identity** | Acts as app | Acts as user |
| **Security** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Highest | ‚≠ê‚≠ê‚≠ê Good |
| **Best For** | Production, CI/CD, Enterprise | Personal, Prototypes |

### Why Enterprises Choose GitHub Apps

<table>
<tr>
<td width="25%"><strong>üîê Permission Model</strong></td>
<td>
<strong>Least-privilege access.</strong> Grant only exact permissions needed (e.g., "Read contents" vs full <code>repo</code> access). Minimizes blast radius and supports compliance (SOC 2, ISO 27001).
</td>
</tr>

<tr>
<td><strong>üè¢ Installation</strong></td>
<td>
<strong>Centralized control.</strong> IT/security teams see all app installations, enforce policies, prevent shadow IT. Admin approval ensures integrations are vetted and documented.
</td>
</tr>

<tr>
<td><strong>üéØ Access Scope</strong></td>
<td>
<strong>Reduced attack surface.</strong> Apps only access explicitly installed repositories. Critical for organizations with repositories at different sensitivity levels.
</td>
</tr>

<tr>
<td><strong>üîë Token Type</strong></td>
<td>
<strong>Better security posture.</strong> Tokens are scoped and revocable instantly. Long-lived OAuth tokens remain valid for months if compromised.
</td>
</tr>

<tr>
<td><strong>üë§ Identity</strong></td>
<td>
<strong>Clear accountability.</strong> Actions attributed to app, not users. Essential for compliance audits and security investigations.
</td>
</tr>

<tr>
<td><strong>üìä Audit Trail</strong></td>
<td>
<strong>Clear audit logs.</strong> Easy to identify automated vs human actions. Essential for SOC 2, HIPAA compliance.
</td>
</tr>
</table>

---

## Creating a GitHub App

<Callout type="warning">
  You **must** create a GitHub App (not an OAuth App). The "OAuth App" option in GitHub does not provide 
  the fine-grained permissions model required for secure production use.
</Callout>

<Steps>

### Navigate to GitHub App Settings

1. Log in to GitHub and click your profile picture (top-right corner)
2. Click **Settings** from the dropdown menu
3. Scroll down in the left sidebar and click **Developer settings**
4. Click **GitHub Apps** in the left sidebar
5. Click **New GitHub App** button

### Configure Basic Information

Fill in the following fields:

- **GitHub App name**: Enter a descriptive name (e.g., "My Company GitHub Integration")
  - This name will be visible to users when installing the app
- **Homepage URL**: Your application homepage URL
- **User authorization callback URL**: The redirect URL generated by Arcade (you'll get this in step 4)
- **Webhook URL**: Leave blank unless you need webhooks
- **Webhook secret**: Leave blank unless you need webhooks

**Important settings:**
- Leave "Expire user authorization tokens" **checked** ‚úÖ
- Leave "Request user authorization (OAuth) during installation" **unchecked** ‚ùå
- Leave "Setup URL" blank and "Redirect on update" **unchecked** ‚ùå
- Ensure "Optional features > User-to-server token expiration" is **enabled** ‚úÖ

### Set Permissions

Configure permissions based on your needs. At minimum:

**Repository Permissions:**
- **Contents**: Read (required for most tools)
- **Issues**: Read & Write (for issue management)
- **Metadata**: Read (automatically selected)
- **Pull requests**: Read & Write (for PR management)
- **Statuses**: Read (for CI/CD status checks)

**Organization Permissions:**
- **Members**: Read (for collaborators, teams, org projects)
- **Projects**: Read & Write (for Projects V2 management)

**User Permissions:**
- **Email addresses**: Read (minimum required)
- **Read user profile**: Read (for user context tools)

<Callout type="info">
  See the [Complete Permissions Reference](#tool-permissions-reference) below for detailed permissions needed by each tool.
</Callout>

### Set Installation Options

- **Personal use**: Select "Only on this account"
- **Organization use**: Select "Any account"

### Create the App

1. Review all settings
2. Click **Create GitHub App**
3. You'll be redirected to your app's settings page

### Generate Private Key and Note Credentials

After creating the app:

1. **Generate Private Key**:
   - Scroll to **Private keys** section
   - Click **Generate a private key**
   - Save the `.pem` file securely (you cannot download it again!)

2. **Note these values**:
   - **App ID**: Found at top of settings page
   - **Client ID**: In the "About" section
   - **Client Secret**: Click "Generate a new client secret" ‚Üí Copy immediately
   - **Private Key**: Contents of the `.pem` file you downloaded

<Callout type="warning">
  Store all credentials securely! Treat them like passwords. You cannot retrieve them again.
</Callout>

### Install the App

1. Click **Install App** button (top-right)
2. Select your account or organization
3. Choose repository access:
   - **All repositories**: Access to all current and future repos
   - **Select repositories**: Only specific repos (recommended)
4. Click **Install**

<Callout>
  For organization installs, an org admin may need to approve the installation.
</Callout>

### Get Installation ID

After installation:
- You'll be redirected to the installation settings page
- Look at the URL: `https://github.com/settings/installations/{INSTALLATION_ID}`
- Copy the **Installation ID** from the URL
- Save this ID - you'll need it for Arcade configuration

</Steps>

### For Private Organization Repositories

If you need to access private repositories in an organization:

1. Make the app public: **Advanced** ‚Üí **Make public**
2. Add the app to the organization: **Install app** ‚Üí Select your organization

---

## Configuring GitHub Auth in Arcade

<Callout type="info">
  When using your own app credentials, make sure you configure your project to use a 
  [custom user verifier](/home/auth/secure-auth-production#build-a-custom-user-verifier).
  Without this, your end-users will not be able to use your app or agent in production.
</Callout>

<Tabs items={["Dashboard GUI"]}>
<Tabs.Tab>

### Configure via Arcade Dashboard

<Steps>

#### Access the Arcade Dashboard

Go to [api.arcade.dev/dashboard](https://api.arcade.dev/dashboard). If self-hosting, use `http://localhost:9099/dashboard` (adjust host/port as needed).

#### Navigate to OAuth Providers

- Under **OAuth** section, click **Providers**
- Click **Add OAuth Provider** (top-right)
- Select **Included Providers** tab
- In **Provider** dropdown, select **GitHub**

#### Enter Provider Details

- **ID**: Choose unique ID (e.g., "my-github-provider")
- **Description**: Optional description
- **Client ID**: From your GitHub app
- **Client Secret**: From your GitHub app
- **Redirect URL**: Note the URL generated by Arcade - add this to your GitHub app's "Callback URL"

#### Create the Provider

Click **Create** button. The provider is now ready to use.

</Steps>

When you use tools requiring GitHub auth with your Arcade account, Arcade automatically uses this provider. 
For multiple providers, see [using multiple auth providers](/home/auth-providers#using-multiple-providers-of-the-same-type).

</Tabs.Tab>
</Tabs>

---

## Using GitHub Auth in App Code

Use the GitHub auth provider to get a user token for the GitHub API. See [authorizing agents with Arcade](/home/auth/how-arcade-helps) for details.

Use `client.auth.start()` to get a user token:

<Tabs items={["Python", "JavaScript"]} storageKey="preferredLanguage">
<Tabs.Tab>

```python {21-24}
import requests
from arcadepy import Arcade

client = Arcade()  # Automatically finds the `ARCADE_API_KEY` env variable

user_id = "{arcade_user_id}"

"""
In this example, we use Arcade to authenticate with GitHub and retrieve
the number of stargazers of the ArcadeAI/arcade-ai repository.

There is a tool for that in the Arcade SDK, which simplifies the process.
Below we're showing how to use Arcade as an auth provider directly.
"""

# Start the authorization process
auth_response = client.auth.start(
    user_id=user_id,
    provider="github",
)

if auth_response.status != "completed":
    print("Please complete the authorization challenge in your browser:")
    print(auth_response.url)

# Wait for the authorization to complete
auth_response = client.auth.wait_for_completion(auth_response)

if not auth_response.context.token:
    raise ValueError("No token found in auth response")

token = auth_response.context.token

owner = "ArcadeAI"
name = "arcade-ai"
headers = {
    "Accept": "application/vnd.github+json",
    "Authorization": f"Bearer {token}",
    "X-GitHub-Api-Version": "2022-11-28",
}
url = f"https://api.github.com/repos/{owner}/{name}"

response = requests.get(url, headers=headers)
response.raise_for_status()

print(response.json().get("stargazers_count"))
```

</Tabs.Tab>
<Tabs.Tab>

```javascript {20}
import { Arcade } from "@arcadeai/arcadejs";

const client = new Arcade(); // Automatically finds the `ARCADE_API_KEY` env variable

const userId = "{arcade_user_id}";

/*
In this example, we use Arcade to authenticate with GitHub and retrieve
the number of stargazers of the ArcadeAI/arcade-ai repository.

There is a tool for that in the Arcade SDK, which simplifies the process.
Below we're showing how to use Arcade as an auth provider directly.
*/

// Start the authorization process
let authResponse = await client.auth.start(userId, "github");

if (authResponse.status !== "completed") {
  console.log("Please complete the authorization challenge in your browser:");
  console.log(authResponse.url);
}

// Wait for the authorization to complete
authResponse = await client.auth.waitForCompletion(authResponse);

if (!authResponse.context.token) {
  throw new Error("No token found in auth response");
}

const token = authResponse.context.token;

const owner = "ArcadeAI";
const name = "arcade-ai";
const headers = {
  Accept: "application/vnd.github+json",
  Authorization: `Bearer ${token}`,
  "X-GitHub-Api-Version": "2022-11-28",
};
const url = `https://api.github.com/repos/${owner}/${name}`;

const response = await fetch(url, { headers });
if (!response.ok) {
  throw new Error(`HTTP error! status: ${response.status}`);
}
const data = await response.json();
console.log(data.stargazers_count);
```

</Tabs.Tab>
</Tabs>

---

## Using GitHub Auth in Custom Tools

Use the pre-built [Arcade GitHub MCP Server](/mcp-servers/development/github) for quick GitHub integration.

For custom tools, use the `GitHub()` auth class. The `context.authorization.token` field will be automatically populated:

```python {3-4,7,15}
from typing import Annotated

import httpx
from arcade_tdk import ToolContext, tool
from arcade_tdk.auth import GitHub

@tool(requires_auth=GitHub())
async def count_stargazers(
    context: ToolContext,
    owner: Annotated[str, "The owner of the repository"],
    name: Annotated[str, "The name of the repository"],
) -> Annotated[int, "The number of stargazers (stars) for the specified repository"]:
    """Count the number of stargazers (stars) for a GitHub repository."""
    if not context.authorization or not context.authorization.token:
        raise ValueError("No token found in context")

    headers = {
        "Accept": "application/vnd.github+json",
        "Authorization": f"Bearer {context.authorization.token}",
        "X-GitHub-Api-Version": "2022-11-28",
    }
    url = f"https://api.github.com/repos/{owner}/{name}"

    async with httpx.AsyncClient() as client:
        response = await client.get(url, headers=headers)
        response.raise_for_status()
        return response.json().get("stargazers_count", 0)
```

---

## Tool Permissions Reference

This section lists the GitHub App permissions required by tools in the Arcade GitHub MCP Server.

### Summary Table

| Tool Category | Required Permissions |
|---------------|---------------------|
| **Issues** | Contents (Read), Issues (Read/Write), Metadata (Read) |
| **Pull Requests** | Contents (Read), Pull requests (Read/Write), Metadata (Read) |
| **Projects** | Contents (Read), Metadata (Read), Projects (Read/Write), Members (Read) |
| **Repositories** | Contents (Read), Metadata (Read), Members (Read for org repos) |
| **Reviews** | Contents (Read), Pull requests (Read/Write), Metadata (Read) |
| **User Context** | Read user profile, Members (Read for orgs) |
| **Notifications** | ‚ö†Ô∏è Classic PAT with `notifications` scope (GitHub Apps limitation) |

### Detailed Permissions by Category

<Tabs items={["Issues", "Pull Requests", "Projects", "Repositories", "User Context", "Special Cases"]}>
<Tabs.Tab>

**Issues Tools** (5 tools):
- `create_issue`, `update_issue`, `create_issue_comment`, `list_issues`, `get_issue`

**Required:**
- Repository: Contents (Read), Issues (Read/Write), Metadata (Read)
- Organization: Projects (Read/Write) - only for `create_issue` when adding to org project

</Tabs.Tab>
<Tabs.Tab>

**Pull Request Tools** (14 tools):

**Read-only tools:**
- `list_pull_requests`, `get_pull_request`, `list_pull_request_commits`, `list_review_comments_on_pull_request`
- Required: Contents (Read), Pull requests (Read), Metadata (Read)

**Write tools:**
- `update_pull_request`, `create_pull_request`, `merge_pull_request`, `submit_pull_request_review`, 
  `manage_pull_request`, `manage_pull_request_reviewers`, `create_reply_for_review_comment`, `create_review_comment`
- Required: Contents (Read), Pull requests (Write), Metadata (Read)
- `merge_pull_request` also needs: Contents (Read & Write)

**Special:**
- `assign_pull_request_user`: Needs Issues (Write) + Members (Read)
- `check_pull_request_merge_status`: Needs Statuses (Read)

</Tabs.Tab>
<Tabs.Tab>

**Projects Tools** (5 tools):
- `list_projects`, `list_project_items`, `search_project_item`, `list_project_fields`, `update_project_item`

**Required:**
- Repository: Contents (Read), Metadata (Read)
- Organization: Projects (Read/Write), Members (Read)

</Tabs.Tab>
<Tabs.Tab>

**Repository Tools** (7 tools):

**Basic:**
- `count_stargazers`, `get_repository`, `list_repository_activities`, `set_starred`, `list_stargazers`
- Required: Contents (Read), Metadata (Read)

**Organization:**
- `list_org_repositories`, `search_my_repos`, `list_repository_collaborators`
- Required: Contents (Read), Metadata (Read), Members (Read)

**Reviews:**
- `list_review_comments_in_a_repository`
- Required: Contents (Read), Pull requests (Read), Metadata (Read)

</Tabs.Tab>
<Tabs.Tab>

**User Context Tools** (4 tools):

- `who_am_i`: Members (Read), Read user profile
- `get_user_recent_activity`, `get_user_open_items`: Contents (Read), Metadata (Read), Read user profile
- `get_review_workload`: Contents (Read), Pull requests (Read), Metadata (Read), Read user profile

</Tabs.Tab>
<Tabs.Tab>

**‚ö†Ô∏è Notifications Tools**

GitHub Apps **cannot** access the notifications API. This is a platform limitation.

**Workaround:**
- Tools: `get_notification_summary`, `list_notifications`
- **Required**: Classic Personal Access Token with `notifications` scope
- **Create at**: https://github.com/settings/tokens
- **Why**: Notifications are personal user data, not accessible to apps by design

**User-on-Behalf-of Actions:**

Some actions (starring repos, user notifications) require special permission:
- Enable in app settings: **User permissions** ‚Üí "Act on behalf of user"
- These actions act as the user, not as the app

</Tabs.Tab>
</Tabs>

---

## Important Gotchas

<Callout type="warning">
  These are common issues users encounter. Read this section to avoid frustration!
</Callout>

### Permission Changes Require Reauthorization

When you change permissions in GitHub App settings, existing tokens won't automatically get new permissions.

**Solution**: User must revoke authorization in Arcade and reauthorize, OR admin can revoke in GitHub App settings.

### 404 Errors Can Mean Missing Permissions

If permissions aren't approved by admin, APIs return `404 Not Found` (not 403!).

**Why**: GitHub doesn't reveal which repositories exist when you lack access.

**Solution**: Check app settings ‚Üí verify all required permissions are approved.

### Installing on Additional Repositories

After creating app and installing on one repo, it's hard to find how to install on more repos.

**Solution**: Settings ‚Üí Applications ‚Üí Installed GitHub Apps ‚Üí Click app ‚Üí Configure ‚Üí Add repositories

### Permissions ‚â† Scopes

- GitHub Apps use **permissions** (fine-grained), not **scopes** (OAuth Apps)
- Scopes aren't present in GitHub App tokens
- User is still limited by their own GitHub permissions (can't elevate privileges)

### Personal vs Organization GitHub Apps

**Functionally the same**, but:
- **Personal account app**: You own and manage it
- **Organization app**: Org owns it, can be managed by org admins
- Both can be installed on any account if "Any account" is selected

---

## Troubleshooting

### Common Errors

| Error | Cause | Solution |
|-------|-------|----------|
| **"Resource not accessible by integration"** | Missing permissions or not installed on repo | Verify permissions and installation |
| **"Installation not found"** | Wrong Installation ID | Check Installation ID in URL |
| **"403 Forbidden"** | Missing permissions, not installed, or rate limited | Review permissions, check installation |
| **"404 Not Found" on existing repo** | Permissions not approved by admin | Check app settings ‚Üí verify permissions approved |
| **Notifications not working** | GitHub Apps can't access notifications | Use classic PAT with `notifications` scope |
| **Can't star repositories** | Missing "Act on behalf of user" permission | Enable in User permissions settings |

### Debugging Steps

1. **Verify Installation**
   - Go to Settings ‚Üí Applications ‚Üí Installed GitHub Apps
   - Confirm app is installed on target repository
   - Check Installation ID matches your configuration

2. **Check Permissions**
   - Review app settings ‚Üí Permissions & events
   - Ensure all required permissions are granted
   - Verify organization approval (if applicable)
   - **After changing permissions**: Revoke and reauthorize

3. **Test Credentials**
   - Verify App ID, Client ID/Secret are correct
   - Ensure private key is complete (including header/footer)
   - Check Installation ID matches the target installation

4. **Review Logs**
   - Check GitHub audit logs for denied actions
   - Monitor API rate limits (Apps: 5,000 + 12,500/hour)
   - Review application logs for errors

---

## Frequently Asked Questions

### General

**Q: Is GitHub Apps free?**  
A: Yes! Free GitHub accounts support GitHub Apps. No paid plan needed.

**Q: Can I use one app for multiple projects?**  
A: Yes! Install the same app on multiple repositories. Each gets a unique Installation ID.

**Q: What if I lose my private key?**  
A: Generate a new one from app settings. The old key will be invalidated. You cannot recover lost keys.

### Installation

**Q: Do I need to be an org owner?**  
A: To **create** an app: No. To **install** on org: Yes (or need owner approval).

**Q: How do I install the app on additional repositories?**  
A: Settings ‚Üí Applications ‚Üí Installed GitHub Apps ‚Üí Click your app ‚Üí Configure ‚Üí Select additional repositories.

**Q: Can I change permissions later?**  
A: Yes, anytime. After changing:
- Organization installs require admin approval
- **Users must reauthorize** for new permissions to take effect
- Best practice: Revoke old authorization in Arcade and reauthorize

### Usage

**Q: Which tools need org permissions?**  
A: Project management, collaborators listing, org repo listing, and user search within org context.

**Q: What's the rate limit?**  
A: GitHub Apps: 5,000/hour per installation + 12,500/hour for user endpoints. OAuth: 5,000/hour total.

**Q: Can I use with GitHub Enterprise?**  
A: Yes! Works with GitHub Enterprise Server 2.22+. Just set the API URL to your Enterprise instance.

**Q: Why can't I star repositories or access notifications?**  
A: These require "Act on behalf of user" permission:
- Enable in app settings ‚Üí User permissions
- These actions act as the user, not as the app
- Notifications specifically require a classic PAT (GitHub Apps limitation)

### Security

**Q: What if my credentials are compromised?**  
A: Immediately:
1. Revoke credentials in GitHub app settings
2. Generate new ones
3. Update your application
4. Review audit logs
5. Uninstall/reinstall if needed

**Q: Why can't the app access all my repositories?**  
A: Security by design. Apps only access repositories they're explicitly installed on. This limits blast radius if compromised.

---

## Configuration Checklist

Use this checklist to ensure proper setup:

- [ ] Created GitHub App (not OAuth App)
- [ ] Set all required permissions
- [ ] Generated and securely stored private key
- [ ] Noted App ID, Client ID, Client Secret
- [ ] Installed app on target repositories
- [ ] Got Installation ID from URL
- [ ] Added Arcade redirect URL to GitHub app
- [ ] Configured provider in Arcade dashboard
- [ ] Tested with simple API call
- [ ] Set up credential rotation schedule

---

## Additional Resources

- [GitHub Apps Documentation](https://docs.github.com/en/apps)
- [GitHub API Documentation](https://docs.github.com/en/rest)
- [Security Best Practices](https://docs.github.com/en/apps/creating-github-apps/setting-up-a-github-app/best-practices-for-creating-a-github-app)
- [Arcade GitHub MCP Server](/mcp-servers/development/github)
- [Arcade Authorization Guide](/home/auth/how-arcade-helps)

---

*üí° Remember: Always use GitHub Apps (not OAuth Apps), store credentials securely, and rotate them regularly!*
