---
title: "On-premises MCP Servers"
description: "Learn how to deploy MCP servers in a hybrid architecture"
---

import { Steps, Tabs, Callout } from "nextra/components";

# On-premise MCP Servers

An on-premises MCP server deployment allows you to execute tools in your own environment while still leveraging Arcade's cloud Engine infrastructure. This gives you the flexibility to access private resources, maintain data security, and customize your environment while leveraging Arcade's MCP server management and federation capabilities.

## How on-premises MCP servers work

The on-premises MCP server model uses a bidirectional connection between your local environment and Arcade's cloud engine:

1. You run the Arcade MCP server in your environment (on-premises, private cloud, etc.)
2. Your MCP server is exposed to Arcade's cloud engine using a public URL
3. The Arcade cloud engine routes tool calls to your MCP server
4. Your MCP server processes the requests and returns responses to the engine

## Benefits of on-premises MCP servers

- **Resource access**: Access private databases, APIs, and other resources not accessible from Arcade's cloud
- **Data control**: Keep sensitive data within your environment while still using Arcade's capabilities
- **Custom environments**: Use specific dependencies or configurations required by your tools
- **Compliance**: Meet regulatory requirements by keeping data processing within your infrastructure

## Setting up an on-premises MCP server

<Steps>

### Setup your MCP Servers

Follow the [Creating a MCP Server](/home/build-tools/create-a-mcp-server) guide to create your MCP Server.

### Start your local MCP Server

Ensure you are logged in to Arcade:

<Tabs items={["CLI", "Environment Variable"]}>
<Tabs.Tab>

```bash
arcade login
```

</Tabs.Tab>
<Tabs.Tab>

Add the environment variables to your shell:

```bash
export ARCADE_API_KEY=<your-api-key>
export ARCADE_USER_ID=<your-user-id>
```

or to a `.env` file:

```env filename=".env"
ARCADE_API_KEY=<your-api-key>
ARCADE_USER_ID=<your-user-id>
```

</Tabs.Tab>
</Tabs>

Run your Arcade MCP Server locally with a secret that you generate in a secure way:

```bash
cd <your-mcp-server-directory>
arcade mcp
```

Your MCP server is running on http://127.0.0.1:8000

### Create a public URL

To allow the Arcade cloud engine to connect to your locally running MCP Server, you need a public URL. Here are a few options:

<Tabs items={["ngrok", "Cloudflare", "Tailscale"]}>
<Tabs.Tab>

```bash
ngrok http 8000
```

</Tabs.Tab>

<Tabs.Tab>

```bash
cloudflared tunnel --url http://localhost:8000
```

</Tabs.Tab>

<Tabs.Tab>

```bash
tailscale funnel 8000
```

</Tabs.Tab>
</Tabs>

### Register your MCP Server in Arcade

1. Navigate to the [Servers](https://api.arcade.dev/dashboard/servers) page in your Arcade dashboard
1. Click **Add Server**
1. Fill in the form:
   - **ID**: Choose a unique identifier (e.g., `my-server`)
   - **Server Type**:
     - Select `Arcade` if you followed the [Creating a MCP Server](/home/build-tools/create-a-mcp-server) guide.  Some features like OAuth for users and secret injection require connecting to the server via the `Arcade` method. 
     - Select `MCP` if you have an MCP Server that was not created with Arcade
   - **URL**: Enter your public URL from Step 3, and add `/mcp` to the end
   - **Timeout** and **Retry**: Configure as needed for your use case
1. Click **Create**

### Test the connection to your MCP Server

You can now test your MCP Server by making requests using the Playground, or an MCP client:

<Tabs items={["Playground", "MCP Client"]}>
<Tabs.Tab>

1. Go to the [Playground](https://api.arcade.dev/dashboard/playground)
1. Select a tool from your MCP Server and execute it
1. Verify that the response is correct and you see request logs in your MCP Server

</Tabs.Tab>
<Tabs.Tab>

1. Use an app that supports MCP clients, like AI assistants and IDEs:
   - [Visual Studio Code](/home/mcp-clients/visual-studio-code)
   - [Claude Desktop](/home/mcp-clients/claude-desktop)
   - [Cursor](/home/mcp-clients/cursor)
1. Enable your MCP Server from the list of available MCP Servers
1. Verify that the response is correct and you see request logs in your MCP Server

</Tabs.Tab>
</Tabs>

</Steps>

## Best practices

- **Persistent URLs**: For production use, set up a persistent public URL rather than ephemeral ones
- **TLS**: Use a TLS-enabled URL for production use
- **Monitoring**: Set up monitoring for your MCP Server to ensure availability

## Troubleshooting

- **Connection issues**: Ensure your public URL is accessible and that your local MCP Server is running
- **Timeout errors**: If your MCP Server takes too long to respond, increase the timeout value in the MCP Server configuration

## Next steps

- [Create custom tools](/home/build-tools/create-a-mcp-server) for your MCP Server
- [Set up authentication](/home/build-tools/create-a-tool-with-auth) for secure access to resources
- [Configure secrets](/home/build-tools/create-a-tool-with-secrets) for your MCP Server
