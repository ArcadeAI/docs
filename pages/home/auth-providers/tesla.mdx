import { Tabs } from "nextra/components";

# Tesla auth provider

<Note>
  At this time, Arcade does not offer a default Tesla Auth Provider. To use
  Tesla auth, you must create a custom Auth Provider with your own Tesla
  OAuth 2.0 credentials as described below.
</Note>

The Tesla auth provider enables tools and agents to call the [Tesla Fleet API](https://developer.tesla.com/docs/fleet-api/getting-started/what-is-fleet-api) on behalf of a user. Behind the scenes, the Arcade Engine and the Tesla auth provider seamlessly manage Tesla OAuth 2.0 authorization for your users.

### What's documented here

This page describes how to use and configure Tesla auth with Arcade.

This auth provider is used by:

- Your [app code](#using-tesla-auth-in-app-code) that needs to call Tesla Fleet API
- Or, your [custom tools](#using-tesla-auth-in-custom-tools) that need to call Tesla Fleet API

## Configuring Tesla auth

### Create a Tesla developer account

- Create a Tesla developer account at the [Tesla Developer Portal](https://developer.tesla.com/)
- Register a new application in the developer console
- Set the redirect URL to: `https://cloud.arcade.dev/api/v1/oauth/callback`
- Request the necessary scopes for your application (vehicle data, commands, etc.)
- Copy the Client ID and Client Secret to use below

Next, add the Tesla app to your Arcade Engine configuration. You can do this in the Arcade Dashboard, or by editing the `engine.yaml` file directly (for a self-hosted instance).

### Configuring Tesla auth with the Arcade Dashboard

1. Navigate to the OAuth section of the Arcade Dashboard and click **Add OAuth Provider**.
2. Select **Tesla** as the provider.
3. Choose a unique **ID** for your provider (e.g. "my-tesla-provider") with an optional **Description**.
4. Enter your **Client ID** and **Client Secret** from your Tesla developer account.
5. Click **Save**.

When you use tools that require Tesla auth using your Arcade account credentials, the Arcade Engine will automatically use this Tesla OAuth provider.

### Configuring Tesla auth in self-hosted Arcade Engine configuration

<Steps>

### Set environment variables

Set the following environment variables:

```bash
export TESLA_CLIENT_ID="<your client ID>"
export TESLA_CLIENT_SECRET="<your client secret>"
```

Or, you can set these values in a `.env` file:

```bash
TESLA_CLIENT_ID="<your client ID>"
TESLA_CLIENT_SECRET="<your client secret>"
```

<Tip>
  See [Engine configuration](/home/configure/engine) for more information on how
  to set environment variables and configure the Arcade Engine.
</Tip>

### Edit the Engine configuration

Edit the `engine.yaml` file and add a `tesla` item to the `auth.providers` section:

```yaml file=<rootDir>/examples/code/integrations/tesla/config_provider.engine.yaml {3-9}

```

</Steps>

## Using Tesla auth in app code

Use the Tesla auth provider in your own agents and AI apps to get a user token for the Tesla Fleet API. See [authorizing agents with Arcade](/home/auth/how-arcade-helps) to understand how this works.

Use `client.auth.start()` to get a user token for the Tesla Fleet API:

<Tabs items={["Python", "JavaScript"]}>
<Tabs.Tab>

```python file=<rootDir>/examples/code/integrations/tesla/custom_auth.py {8-12}

```

</Tabs.Tab>

<Tabs.Tab>

```javascript file=<rootDir>/examples/code/integrations/tesla/custom_auth.js {8-10}

```

</Tabs.Tab>

</Tabs>

## Using Tesla auth in custom tools

The Arcade [Model API](/home/use-tools/call-tools-with-models) is a convenient way to call language models and automatically invoke tools. You can author your own [custom tools](/home/build-tools/create-a-toolkit) that interact with the Tesla Fleet API.

Use the `Tesla()` auth class to specify that a tool requires authorization with Tesla. The `context.authorization.token` field will be automatically populated with the user's Tesla token:

```python file=<rootDir>/examples/code/integrations/tesla/custom_tool.py {5-6,9-13,23}

```