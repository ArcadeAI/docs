---
title: "Get a token in an agent"
description: "Guide on how to authorize agents in Arcade"
---

import { Steps } from "nextra/components";

# Generic Agent Authorization

In this guide, you'll learn how to use Arcade to obtain user authorization for accessing third-party services, without using Arcade for tool execution or definition.

This can be useful when you need to manage authorization flows in your application.

<Steps>

### Prerequisites

- [Set up Arcade](/home/quickstart)
- Install the Arcade Client:

```bash
pip install arcadepy google-api-python-client google-auth-httplib2 google-auth-oauthlib
```

### Initialize the Arcade client

Create an instance of the Arcade client:

```python file=<rootDir>/examples/code/guides/agentauth/auth_with_google.py#L5

```

### Initiate an authorization request

Use `client.auth.start` to initiate the authorization process:

```python file=<rootDir>/examples/code/guides/agentauth/auth_with_google.py#L17-L25

```

### Guide the user through authorization

If authorization is not completed, prompt the user to visit the authorization URL:

```python file=<rootDir>/examples/code/guides/agentauth/auth_with_google.py#L27-L29

```

### Wait for the user to authorize the request

Use `wait_for_completion()` to wait for the user to authorize the request:

```python file=<rootDir>/examples/code/guides/agentauth/auth_with_google.py#L32

```

### Use the obtained token

Once authorization is complete, you can use the obtained token to access the third-party service:

```python file=<rootDir>/examples/code/guides/agentauth/auth_with_google.py#L37-L44 {1}

```



</Steps>

<Note>
  Consider using the [Arcade Google toolkit](/toolkits/productivity/google/gmail), which simplifies the process for retrieving email messages even further! The pattern described here is useful if you need to directly get a token to use with Google in other parts of your codebase.
</Note>

### How it works

By using `client.auth.start` and `client.auth.wait_for_completion`, you leverage Arcade to manage the OAuth flow for user authorization.

Arcade handles the authorization challenges and tokens, simplifying the process for you.

### Next steps

Integrate this authorization flow into your application, and explore how you can manage different providers and scopes.
