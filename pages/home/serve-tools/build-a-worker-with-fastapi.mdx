---
title: Build an worker with FastAPI
description: Learn how to build an worker with FastAPI
---

# Build an Arcade AI worker with FastAPI

In this guide, we'll walk through the process of building a worker with FastAPI that can serve tools from a pre-built toolkit.

<Steps>

### Prerequisites

- [Set up Arcade AI](/home/quickstart)
- Install the Arcade AI SDK and any necessary dependencies:

  ```bash
  pip install arcade-ai fastapi pydantic
  ```

### Install a Pre-Built Toolkit

Arcade AI offers a variety of [pre-built toolkits](/toolkits) that you can install and use immediately. For this guide, we'll use the `arcade-math` toolkit as an example.

- Install the `arcade-math` toolkit:

  ```bash
  pip install arcade-math
  ```

### Set Environment Variables

```bash
export ARCADE_API_KEY=<your-api-key>
export ARCADE_WORKER_SECRET=<your-worker-secret> # Use 'dev' for development
```

### Create a FastAPI Application to Serve the Toolkit

We'll set up a FastAPI application that acts as a Worker to serve the tools from the installed toolkit. For this example, we will set up two endpoints:

- `/worker/health` - This endpoint will be used to check the health of the worker.
- `/worker/tools` - This endpoint will be used to list the definitions of the tools served by the worker.

1. **Create a new Python file** (e.g., `main.py`) and import the necessary modules:

   ```python
    import os

    import arcade_math
    from fastapi import FastAPI

    from arcade.sdk import Toolkit
    from arcade.worker.fastapi.worker import FastAPIWorker
   ```

2. **Initialize the FastAPI Application and Worker**

   ```python
   app = FastAPI()

   worker_secret = os.environ.get("ARCADE_WORKER_SECRET")
   worker = FastAPIWorker(
    app, secret=worker_secret, disable_auth=True
   )  # disabling auth for the worker is not recommended for production
   ```

3. **Register the Toolkit with the Worker**

   ```python
   worker.register_toolkit(Toolkit.from_module(arcade_math))
   ```

4. **Define the two endpoints**

   ```python
    @app.get("/worker/health")
    async def getWorkerHealth():
        return worker.health_check()


    @app.get("/worker/tools")
    async def getWorkerTools():
        return worker.get_catalog()
   ```

### Run Your Application

Start your FastAPI application using Uvicorn:

```bash
uvicorn main:app --host 127.0.0.1 --port 8000
```

### Test the Setup

You can now send a GET request to the `/worker/health` and `/worker/tools` endpoints to verify that your worker is running and to see the definitions of the tools that are available.

Example `/worker/health` request using `curl`:

```bash
curl -X GET "http://127.0.0.1:8000/worker/health"
```

_Example Output:_

```json
{
  "status": "ok",
  "tool_count": 9
}
```

Example `/worker/tools` request using `curl`:

```bash
curl -X GET "http://127.0.0.1:8000/worker/tools"
```

</Steps>

### How It Works

- **Arcade Worker**: The `FastAPIWorker` serves your tools over HTTP, allowing them to be called by the Arcade Engine.
- **Toolkit Registration**: By registering the toolkit with the Worker, you make all tools within `arcade_math` available to your application.
- **Worker Health Check**: The `/worker/health` endpoint is used to check the health of the worker.
- **Worker Tools**: The `/worker/tools` endpoint is used to list the definitions of the tools served by the worker.

### Next Steps

- **Explore Other Toolkits**: Install other pre-built toolkits like `arcade-search` or `arcade-slack` to add more functionality.
- **Build Custom Tools**: When you're ready, learn how to [create your own custom toolkits](/home/build-tools/create-a-toolkit) to extend your application's capabilities.
- **Add more endpoints**: Customize the worker to serve more endpoints, such as a chat endpoint.
