---
title: "Authorize tools before the agent runs"
description: "Learn how to use Arcade to authorize multiple tools before the agent runs"
---

import { Steps, Tabs } from "nextra/components";

# Authorize tools before the agent runs

With [Just-in-time authentication](/learn/tool-calling/auth-tool-calling), the agent will request the user to authorize each tool before running it. In many cases, this experience is not what you want to provide to your users. For example, you may expect the users to be able to list their emails, as well as send emails immediately after. With JIT auth, the user would have to authorize each tool separately, which may result in too much friction.

## Overview

In this guide, you'll learn how to use Arcade to authorize multiple tools before the agent runs.

This involves the following steps:
- Get a list of all the tools that the agent will use
- Authorize all the tools (grouped by their Auth provider)
- Run the agent only after all the tools are authorized

<Note>
This guide will rely on Arcade's built-in user verification system. If you want to run this in production, you'll need to implement a custom user verifier. Learn more about [user verification in production](/home/auth/secure-auth-production).
</Note>

### Prerequisites

- [Obtain an Arcade API key](/home/api-keys)
- [Install the Arcade Client](/home/installation)

<Steps>

### Setup your environment

Export your Arcade API key as an environment variable:
```bash
export ARCADE_API_KEY='{arcade_api_key}'
```

### Initialize the client

<Tabs items={["Python", "JavaScript"]} storageKey="preferredLanguage">
<Tabs.Tab>
```python
from arcadepy import Arcade

client = Arcade()
user_id = "{arcade_user_id}"
```
</Tabs.Tab>
<Tabs.Tab>
```javascript
import Arcade from "@arcadeai/arcadejs";

const client = new Arcade();
const user_id = "{arcade_user_id}";
```
</Tabs.Tab>
</Tabs>

### Write a helper function to get the tools

This guide is more useful when we are dealing with tools from multiple toolkits. We'll write a helper function to get the tools from the `Gmail` and `GitHub` toolkits.

<Tabs items={["Python", "JavaScript"]} storageKey="preferredLanguage">
<Tabs.Tab>
```python file=<rootDir>/examples/code/guides/tool-callling/get-tools-helper.py
```
</Tabs.Tab>
<Tabs.Tab>
```python file=<rootDir>/examples/code/guides/tool-callling/get-tools-helper.py
```
</Tabs.Tab>
</Tabs>


### Define the tools that the agent will use

To make this example representative, we'll use tools from two different toolkits: `Gmail` and `GitHub`.

<Tabs items={["Python", "JavaScript"]} storageKey="preferredLanguage">
<Tabs.Tab>
```python
tools = await get_arcade_tools(client, toolkits=["Gmail", "GitHub"])
```
</Tabs.Tab>
<Tabs.Tab>
```javascript
const tools = await get_arcade_tools(client, toolkits=["Gmail", "GitHub"])
```
</Tabs.Tab>
</Tabs>

</Steps>
